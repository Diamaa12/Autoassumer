
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Article List</title>
    <link rel="stylesheet" href="{% static 'css/aappg_news/articles_liste.css'%}">
</head>
<body>


<div class="w-layout-blockcontainer w-container">
     {% if user_has_published_articles %}
    <div class="div-block_principal">
         {% if user.is_superuser %}
            <h2 class="user_accueil_message">Bonjour <span class="user_welcome">{{user_name}}</span>, voici la liste d'articles publié sur ce site.</h2>
        {% else %}
        <h2 class="user_accueil_message">Bonjour <span class="user_welcome">{{user_name}}</span>, voici la liste d&#x27;articles que vous avez publié sur ce site</h2>
        {% endif %}
        <!--Affichage de message pour confirmer la reussite de suppression d'un article-->
        <div id="message-container">
            {% if messages %}
            <div class="message" id="info-message">
                {% for message in messages %}
                    {{ message }}
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% for article in articles %}
       <div class="w-layout-vflex title_container">
        <div class="sommeur"><span class="intro">Article No: {{ forloop.counter }}</span></div>
        <h3 class="article_title"><span>Titre: </span>{{article.title}}</h3>
        <p class="article_content"><span>Contenue:</span> {{ article.content }}</p>
        <div class="author_container">
          <h4 class="author">Auteur:</h4>
          <div class="author_name">{{ article.author}}</div>
        </div>
        <div class="date_published_container">
          <h4 class="publied_date">Publié:</h4>
          <div class="published_date">{{ article.created_at }}</div>
        </div>
        <div class="date_updated_container">
          <h4 class="updated_date">Mis à jour:</h4>
          <div class="update_date">{{article.updated_at}}</div>
        </div>
        <a class="article_update" href="{% url 'my_site:modify_article' article.id %} ">Modifiez l&#x27;article</a>
        {% if user.is_superuser %}
           <a class="article_update" href="{% url 'my_site:delete_article' article.id %} ">Supprimer cet article </a>
        {% endif %}
       </div>
        {% endfor %}

    </div>
     {% else %}
     <h2 class="user_accueil_message">Bonjour <span class="user_welcome">{{user_name}}</span>, Vous n'avez pas encore publié un article sur ce site.</h2>
    {% endif %}
  </div>

        <script>
        document.addEventListener('DOMContentLoaded', function () {
            const message = document.getElementById('info-message');
            if (message) {
                setTimeout(() => {
                    message.classList.add('hidden');
                }, 10000);  // Hide after 5 seconds
            }
        });
    </script>
</body>

</html>