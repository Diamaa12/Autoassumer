
{% extends 'base.html' %}

{% load static%}
{% block title %}<title>Actualites</title>{%endblock%}
{% block content %}

  <!-- Integration de la police de google-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <!-- Integration du fichier CSS en local-->
    <link rel="stylesheet" href="{% static 'css/aappg/aappg_news.css'%}">


    <link rel="stylesheet" href="{% static 'css/aappg_news/aappg_news_paginate.css'%}">
<style>
   .communiquer-conteneur{
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
  display: block;
  overflow:hidden;
  border:1px solid;
}

     .video.w-video.w-embed{
        background:rgb(223, 222, 219);
        min-width:400px;
        min-height:300px;
        display:flex;
        justify-content:center:
        align-items:center;
     }
     .responsive-image {
             max-width: 100%;
            height: auto;
            object-fit: contain;
            display: block;  /* Assurer que l'image est un bloc pour l'utiliser avec margin auto */
            margin-left: auto; /* Centrer horizontalement */
            margin-right: auto; /* Centrer horizontalement */
        }
        .lien-bloc {
          background-color: #26336e;
          color:rgba(243, 245, 252, 0.7);
          flex-flow: column;
          width: 24%;
          display: flex;
          overflow: hidden;
          text-decoration:none;
          border-radius:5px;
          font-family:'Inter', sans-serif;
          padding:5px;
        }

        .title {
          text-align: left;
          font-weight:600
          font-size:16px;
        }

        .paragraph {
          text-align: left;
          font-family:'Inter', sans-serif;
          font-weight:400;
          font-size:12px;
        }

        .container {
          grid-column-gap: 11px;
          grid-row-gap: 11px;
          padding: 14px;
          display: flex;
        }
        .read-more{
            font-size:14px;
            font-weight:700;
        }

   @media screen and (max-width: 767px){

        .lien-bloc {
          background-color:#26336e;
          color:white;
          border-radius: 4px;
          width: 100%;
          padding: 6px;
          text-decoration: none;
          overflow: hidden;
        }

        .container {
          grid-column-gap: 12px;
          grid-row-gap: 12px;
          grid-template: "Area" 1fr
                         "."
                         / 1fr 1fr;
          grid-auto-columns: 1fr;
          grid-auto-flow: row;
          place-items: end start;
          margin-top: 10px;
          padding-left: 10px;
          padding-right: 10px;
          display: grid;
        }
    }
    @media screen and (max-width: 479px){
         .lien-bloc {
        height: 250px;
        max-height: 300px;
        overflow: hidden;
      }
    }
    @media screen and (max-width: 767px) {
        #w-node-b306b1e3-3fe8-423a-0d63-279d92165bf1-03d43ac9 {
        grid-area: span 1 / span 1 / span 1 / span 1;
    }

  #w-node-b877f026-8f3d-8be2-465d-5cf4fe3318f7-03d43ac9 {
    grid-area: Area;
  }
}

@media screen and (max-width: 479px) {
  #w-node-b306b1e3-3fe8-423a-0d63-279d92165bf1-03d43ac9 {
    grid-area: span 1 / span 1 / span 1 / span 1;
  }
}

</style>
  <section class="section_principale" id="aappg_news">
    <div class=" container_motter w-container" id="container_mutter">
      <div class="news_container1">
        <div class="ms_container_left">
            {% if newest_posts %}
          <div style="" class="video w-video w-embed">
              {% if newest_posts.video%}
                <iframe class="embedly-embed" src="{{newest_posts.video}}" width="940" height="528" scrolling="no" allowfullscreen="" title="Les 10 Erreurs à Éviter Lors de la création de votre site web"></iframe>
              {% else %}
              <img class="responsive-image" src="{{newest_posts.image.url}}" alt="imageillustration">
              {% endif %}
          </div>
          <h3 class="heading-38">{{newest_posts.title}}</h3>
          <p>{{newest_posts.content}}</p>
            {% endif %}
        </div>
      </div>
      <div class="news_container2">
        <div class="ms_container_right" id="ms_container_right">
            <!--La boucle qui affiche les articles commence à partir de l'index 1 au lieu de 0 -->
          {% for post in page_obj.object_list%}
          <div class="textarticle_link_contents" data-index="{{ forloop.counter }}">
            <div class="link_container"><a class="article_links" href="{% url 'my_site:article_detail' id=post.id%}#section_page">
              <p id="readMore-{{ forloop.counter }}">{{post.content|truncatewords:7}}</p>
              <div class="link_content">
                <div class="share_close_items" style="display:flex;">
                   <a data-w-id="168d6d76-4b4a-4216-73de-704d20470bcf"  href="#" class="share_btn w-inline-block">
                      <!-- Integrer un lien lire la suite ici-->
                     <svg width="50" height="50" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 1024 1024" app="ikonik" class="share_icone" id="share_icone">
                       <path fill="currentColor" d="M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 0 0 0-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z" app="ikonik" class="path-1ojef"></path>
                     </svg></a>
                   <a data-w-id="168d6d76-4b4a-4216-73de-704d20470bcf"  href="#" class="close_btn w-inline-block">
                     <svg width="50" height="50" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" app="ikonik" class="close_icone" id="close_icone">
                       <path d="M5 5L19 19M5 19L19 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" app="ikonik" class="path-pzjzq"></path>
                     </svg></a>
                  </div>

                  <div class="container_network_social" id="container_network_social">
                  <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.leyssare.com"  target="_blank" class="sn_facebook w-inline-block" ><img sizes="100vw" srcset="{% static 'images/social_network/facebook-p-500.png'%} 500w, {% static 'images/social_network/facebook.png'%} 512w" alt="facebook_link" src="{% static 'images/social_network/facebook.png'%}" loading="lazy" class="image-39"></a>
                  <a href="http://whatsapp.com" target="_blank" class="whatsapp w-inline-block"><img sizes="100vw" srcset="{% static 'images/social_network/whatsapp-p-500.png'%} 500w, {% static 'images/social_network/whatsapp.png'%} 512w" alt="whatsapp_link" src="{% static 'images/social_network/whatsapp.png'%}" loading="lazy" class="image-40"></a>
                  <a href="http://instagram.fr" target="_blank" class="instagram w-inline-block"><img sizes="100vw" srcset="{% static 'images/social_network/instagram-p-500.png'%} 500w, {% static 'images/social_network/instagram.png'%} 512w" alt="instagram_link" src="{% static 'images/social_network/instagram.png'%}" loading="lazy" class="image-3"></a>
                  <a href="http://twitter.com" target="_blank" class="twitter w-inline-block"><img sizes="100vw" srcset="{% static 'images/social_network/twitter-p-500.png'%} 500w, {% static 'images/social_network/twitter.png'%} 512w" alt="twitter_link" src="{% static 'images/social_network/twitter.png'%}" loading="lazy" class="image-4"></a>
                  <a href="http://linkedin.fr" target="_blank" class="linkedin w-inline-block"><img sizes="100vw" srcset="{% static 'images/social_network/linkedin-p-500.png'%} 500w, {% static 'images/social_network/linkedin.png'%} 512w" alt="linkedin_link" src="{% static 'images/social_network/linkedin.png'%}" loading="lazy" class="image-6"></a>
                  <a href="https://www.tiktok.com/@kourahi33" target="_blank" class="tiktok w-inline-block"><img sizes="100vw" srcset="{% static 'images/social_network/tik-tok-p-500.png'%} 500w, {% static 'images/social_network/tik-tok.png'%} 512w" alt="tiktok_link" src="{% static 'images/social_network/tik-tok.png'%}" loading="lazy" class="image-7"></a>
                </div>
              </div>
                </a>
            </div>
            <a href="#" class="link-block-11 w-inline-block">{% if post.image %}<img width="120" loading="lazy" alt="Image_illustration" src="{{ post.image.url }}">{% endif %}</a>
         </div>
          {% endfor %}
            <!--Pagination navigation pour les articles -->
          <div class="pagination"><span class="page-links">
              {% if page_obj.has_previous %}
              <a href="?page=1">&laquo; first</a>
              <a href="?page={{ page_obj.previous_page_number }}"><</a>
              {% endif %}
              <span class="current">
                  Page {{ page_obj.number}} of {{ page_obj.paginator.num_pages }}
              </span>
              {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}">></a>
              <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
              {% endif %}
          </span>
        </div>
        </div>
      </div>
    </div>
      <div class="communiquer-conteneur">
        <h3 style="color:#c4c4c4;" class="heading-37">Derniers communiqués d'AAPPG</h3>
        <div class="w-layout-blockcontainer container w-container">
          {% if communique1 %}
          <a id="w-node-b306b1e3-3fe8-423a-0d63-279d92165bf1-03d43ac9" href="{% url 'my_site:communique' id=communique1.id %}" class="lien-bloc w-inline-block">
            <div class="title">{{communique1.titre}}</div>
            <p class="paragraph">{{communique1.content|truncatewords:20}}<br/>  <span class="read-more">Lire la suite</span></p>
          </a>
          {% endif %}
          {% if communique2 %}
          <a href="{% url 'my_site:communique' id=communique2.id %}" class="lien-bloc w-inline-block">
            <div class="title">{{communique2.titre}}</div>
            <p class="paragraph">{{communique2.content|truncatewords:20}}<br/> <span class="read-more">Lire la suite</span></p>
          </a>
           {% endif %}
          {% if communique3 %}
          <a href="{% url 'my_site:communique' id=communique3.id %}" class="lien-bloc w-inline-block">
            <div class="title">{{communique3.titre}}</div>
            <p class="paragraph">{{communique3.content|truncatewords:20}}<br/>  <span class="read-more">Lire la suite</span></p>
          </a>
          {% endif %}
          {% if communique4 %}
          <a id="w-node-b877f026-8f3d-8be2-465d-5cf4fe3318f7-03d43ac9" href="{% url 'my_site:communique' id=communique4.id %}" class="lien-bloc w-inline-block">
            <div class="title">{{communique4.titre}}</div>
              <p class="paragraph">{{communique4.content|truncatewords:20}}<br/>  <span class="read-more">Lire la suite</span></p>
          {% endif %}
          </a>
        </div>
  </div>
  </section>

  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=66ad640bd6bbcd6403d43a8e" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="{% static 'js/aappg_news.js'%}" type="text/javascript"></script>
  <script>

      document.addEventListener("DOMContentLoaded", function() {
   // Sélectionner tous les éléments ayant l'attribut data-index
   document.querySelectorAll('[data-index]').forEach((element) => {

       // Récupérer le bouton de partage et le bloc caché pour chaque élément
       const shareBtn = element.querySelector(".share_btn");
       const closeBtn = element.querySelector(".close_btn");
       closeBtn.style.display = 'none';

       const containerSocialNwk = element.querySelector('.container_network_social'); // le container correspondant

       shareBtn.addEventListener('click', () => {
           console.log(" Vous m'avez cliqué dessus.");
           containerSocialNwk.style.display = 'flex';
           closeBtn.style.display = 'block';
           shareBtn.style.display = 'none';
           console.log('sa devrait marcher maintenant');
       });

       closeBtn.addEventListener("click", () => {
           console.log("Ferme moi.");
           shareBtn.style.display = 'block';
           closeBtn.style.display = 'none';
           containerSocialNwk.style.display = 'none';
       });
   });
});

$('[wr-type="error"]').hide() // Hide errors
$('.error').removeClass('error') // Remove error state from fields
var formErrors = false
const fieldError = function(field) {
	field.parent().find('[wr-type="error"]').show() // Show error message
  field.addClass('error') // Add error state to this field
  formErrors = true
}
// Click on the Submit button
$('[wr-type="submit"]').click(function() {
  // Check each required field
  $('[wr-type="required-field"]').each(function() {
  	if ($(this).attr('type') === 'checkbox' && !$(this).is(':checked')) { // Checkbox
    	fieldError($(this).siblings('.w-checkbox-input'))
      return
    }
  	if ($(this).val().length === 0) { // If this field is empty
    	fieldError($(this))
    } else if ($(this).attr('type') === 'email' // Validation for email fields
   	  && ( $(this).val().indexOf('@') === -1 || $(this).val().indexOf('.') === -1) ) {
    		fieldError($(this))
    }
  })
  // Submit parent form if there are no errors
  if (!formErrors) $(this).parents('form').submit()
})
// Remove errors from field
$('[wr-type="required-field"], [type="checkbox"]').on('keypress blur', function() {
	$(this).parent().find('.error').removeClass('error')
	$(this).parent().find('[wr-type="error"]').hide()
  formErrors = false
})
// Press Enter
$('input, textarea').keypress(function(e) {
  if (e.keyCode == 13) {
    e.preventDefault()
    $(this).trigger("change")
    $('[wr-type="submit"]').click()
  }
})
</script>

{% endblock %}